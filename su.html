<html>
  <head></head>
  <body>
    <div id="sudoku">
      <div id="grid"></div>
      <div id="numbers"></div>
    </div>
  </body>
  <script>
    // global state
    const new9x9Matrix = () =>
      Array(9)
        .fill()
        .map(() => Array(9).fill());
    let rows = new9x9Matrix();
    let cols = new9x9Matrix();
    let boxes = new9x9Matrix();
    let sel = undefined;
    // grid
    const test = (e) => {
      [_, r, c] = e.target.id;
      if (solution[r][c] == sel) {
        rows[r][c] = sel;
        cols[c][r] = sel;
        boxes[box][boxi] = sel;
        e.target.innerText = sel;
        if (!rows.flat().includes(undefined)) {
          document.querySelector("#grid").style.backgroundColor = 'lightgreen';
        }
      }
    };
    const grid = document.querySelector("#grid");
    for (let i = 0; i < 9; i++) {
      for (let j = 0; j < 9; j++) {
        const cell = document.createElement("div");
        cell.setAttribute("id", `c${i}${j}`);
        cell.setAttribute("class", "cell");
        grid.appendChild(cell);
        if ((i + 1) % 3 == 0) {
          cell.style.borderBottom = "1px solid black";
        }
        if ((i + 1) % 3 == 1) {
          cell.style.borderTop = "1px solid black";
        }
        if ((j + 1) % 3 == 0) {
          cell.style.borderRight = "1px solid black";
        }
        if ((j + 1) % 3 == 1) {
          cell.style.borderLeft = "1px solid black";
        }
        cell.onclick = test;
      }
    }
    // pad
    const selectNumber = (e) => {
      sel = e.target.innerText;
    };
    const numbers = document.querySelector("#numbers");
    for (let i = 0; i < 9; i++) {
      const num = document.createElement("div");
      num.setAttribute("class", "number");
      num.innerText = i + 1;
      num.onclick = selectNumber;
      numbers.appendChild(num);
    }
    const get_puzzle = () => {
      let a = [
        [0, 0, 0, 2, 6, 0, 7, 0, 1],
        [6, 8, 0, 0, 7, 0, 0, 9, 0],
        [1, 9, 0, 0, 0, 4, 5, 0, 0],
        [8, 2, 0, 1, 0, 0, 0, 4, 0],
        [0, 0, 4, 6, 0, 2, 9, 0, 0],
        [0, 5, 0, 0, 0, 3, 0, 2, 8],
        [0, 0, 9, 3, 0, 0, 0, 7, 4],
        [0, 4, 0, 0, 5, 0, 0, 3, 6],
        [7, 0, 3, 0, 1, 8, 0, 0, 0],
      ];
      return a.map((row) =>
        row.map((num) => (num == 0 ? undefined : num.toString())),
      );
    };
    const solve = (puzzle) => {
      return [
        [4, 3, 5, 2, 6, 9, 7, 8, 1],
        [6, 8, 2, 5, 7, 1, 4, 9, 3],
        [1, 9, 7, 8, 3, 4, 5, 6, 2],
        [8, 2, 6, 1, 9, 5, 3, 4, 7],
        [3, 7, 4, 6, 8, 2, 9, 1, 5],
        [9, 5, 1, 7, 4, 3, 6, 2, 8],
        [5, 1, 9, 3, 2, 6, 8, 7, 4],
        [2, 4, 8, 9, 5, 7, 1, 3, 6],
        [7, 6, 3, 4, 1, 8, 2, 5, 9],
      ];
    };
    puzzle = get_puzzle();
    solution = solve(puzzle);
    const parse = (a) => {
      rows = a;
      cols = a[0].map((_, i) => a.map((row) => row[i]));
      boxes = new9x9Matrix();
      a.map((row, r) => {
        row.map((num, c) => {
          box = Math.floor(r / 3) * 3 + Math.floor(c / 3);
          boxi = (r % 3) * 3 + (c % 3);
          boxes[box][boxi] = num;
        });
      });
      return [rows, cols, boxes];
    };
    [rows, cols, boxes] = parse(puzzle);
    rows.forEach((row, r) => {
      row.forEach((num, c) => {
        document.querySelector(`#c${r}${c}`).innerText = num ?? "";
      });
    });
  </script>
  <style>
    body {
      margin: 0;
      padding: 0;
      height: 100dvh;
      width: 100dvw;
      display: flex;
      align-items: center;
      justify-content: center;
      box-sizing: border-box;
      font-size: 40px;
    }
    #grid {
      display: grid;
      grid-template-columns: repeat(9, 1fr);
      grid-template-rows: repeat(9, 1fr);
      border: 1px solid black;
      width: calc(13.5em+10px);
      height: calc(13.5em+10px);
      background-color: lightgrey;
    }
    .cell {
      display: flex;
      justify-content: center;
      align-items: center;
      border: 1px dotted black;
      width: 1.5em;
      height: 1.5em;
    }
    #numbers {
      height: 80px;
      padding: 0.75em 10%;
      display: flex;
      justify-content: space-between;
    }
    .number {
      background-color: lightgrey;
      display: flex;
      border: 2px solid black;
      align-items: center;
      justify-content: center;
      border-radius: 5px;
      width: 0.9em;
    }
  </style>
</html>
